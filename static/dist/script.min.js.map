{"version":3,"sources":["script.js"],"names":["document","addEventListener","headerBar","querySelector","getStartedBtn","getElementById","formScreen","regionIn","mediumIn","categoryIn","heroImg","captionEl","shopBtn","resultScreen","classList","remove","style","display","add","fetch","d","then","r","json","region","value","medium","category","res","regeneratorRuntime","async","_context","prev","next","trim","abrupt","textContent","awrap","method","headers","Content-Type","stringify","sent","ok","Error","error","modules","hero","caption","onclick","body","JSON","replace","page","t0","console","stop"],"mappings":"aAAAA,SAAAC,iBAAA,mBAAA,WAGE,IAAAC,EAAAF,SAAAG,cAAA,WACMD,EAAgBF,SAASG,eAAc,cACvCC,EAAgBJ,SAASK,eAAe,QACxCC,EAAgBN,SAASK,eAAe,UAGxCE,EAAaP,SAASK,eAAe,UACrCG,EAAaR,SAASK,eAAe,UACrCI,EAAaT,SAASK,eAAe,YACrCK,EAAaV,SAASK,eAAe,WACrCM,EAAaX,SAASK,eAAe,WACrCO,EAAaZ,SAASK,eAAe,WAI3CQ,EAAAA,UAAaC,OAAUC,UAAvBF,EAAaC,UAAUC,OAAO,UAK5BT,EAAWQ,iBAAc,QAAzB,WAFFZ,EAKAc,MAAAC,QAAA,OAHEX,EAAWQ,UAAUI,IAAI,YAMZC,MAAIC,0BAFnBC,KAAA,SAAAC,GAAA,OAGSA,EAAAC,SAAQF,KAAA,SAAAD,GAAAA,EAAAI,SAAAjB,EAAAkB,MAAAL,EAAAI,UADF,MAGf,cAC8DxB,SAAAK,eAAA,YAAAJ,iBAAA,QAAA,WAAA,IAAAuB,EAAAE,EAAAC,EAAAC,EAAAL,EAAA,OAAAM,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,GAAAT,EAAAjB,EAAAkB,MAAAS,OAAAR,EAAAlB,EAAAiB,MAAAS,OAAAP,EAAAlB,EAAAgB,MAAAS,OACtDV,GADsDE,GAClCD,EADkC,CAAAM,EAAAE,KAAA,EAAA,MAAA,OAAAF,EAAAI,OAAA,SAEtDT,MAFsD,gCAAA,KAAA,EAAA,OAAApB,EAAAQ,UAAAC,OAAA,UAAAF,EAAAC,UAAAI,IAAA,UAAAP,EAAAyB,YAAA,cAAAL,EAAAC,KAAA,EAAAD,EAAAE,KAAA,GAAAJ,mBAAAQ,MAevClB,MAAM,oBAAqB,CAfYmB,OAAA,OAS5DC,QAAA,CAAAC,eAAA,oBACAlC,KAAAA,KAAUmC,UAAV,CAAqB1B,OAAAA,EAAOW,OAAAA,EAA5BC,SAAAA,OAV4D,KAAA,GAAA,OAepDC,EAfoDG,EAAAW,KAAAX,EAAAE,KAAA,GAAAJ,mBAAAQ,MAYlDD,EAAAA,QAZkD,KAAA,GAAA,GAY5DzB,EAZ4DoB,EAAAW,KAAAd,EAAAe,GAAA,CAAAZ,EAAAE,KAAA,GAAA,MAAA,MAAA,IAAAW,MAAArB,EAAAsB,OAAA,aAAA,KAAA,GAgBxDP,EAAAA,IAAAA,WAAAA,OAD4Cf,EAAAuB,QAAAC,MAE5CR,EAAAA,YAAShB,EAAAyB,SAAA,WAAEpC,EAAAqC,QAAA,WACXC,IAAAA,EAASC,EAAKV,QAALM,KAAeK,QAAA,OAAA,IAAA,QAAE5B,OAAAA,SAAAA,KAAF6B,GAlBgCtB,EAAAE,KAAA,GAAA,MAAA,KAAA,GAAAF,EAAAC,KAAA,GAAAD,EAAAuB,GAAAvB,EAAA,MAAA,GAkBhCwB,QAAAV,MAAAd,EAAAuB,IAHoB3C,EAfYyB,YAAA,6BAAA,KAAA,GAAA,IAAA,MAAA,OAAAL,EAAAyB,SAAA,KAAA,KAAA,CAAA,CAAA,EAAA","file":"script.min.js","sourcesContent":["// static/script.js\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  // —— Element refs ——  \r\n  const headerBar     = document.querySelector('.header');\r\n  const getStartedBtn = document.getElementById('getStarted');\r\n  const formScreen    = document.getElementById('form');\r\n  const resultScreen  = document.getElementById('result');\r\n\r\n  const regionIn   = document.getElementById('region');\r\n  const mediumIn   = document.getElementById('medium');\r\n  const categoryIn = document.getElementById('category');\r\n  const heroImg    = document.getElementById('heroImg');\r\n  const captionEl  = document.getElementById('caption');\r\n  const shopBtn    = document.getElementById('shopNow');\r\n\r\n  // —— Init state ——  \r\n  formScreen.classList.remove('active');\r\n  resultScreen.classList.remove('active');\r\n\r\n  // —— Get Started → Show Form ——  \r\n  getStartedBtn.addEventListener('click', () => {\r\n    headerBar.style.display = 'none';\r\n    formScreen.classList.add('active');\r\n  });\r\n\r\n  // —— Autofill Region via IP ——  \r\n  fetch('https://ipapi.co/json/')\r\n    .then(r => r.json())\r\n    .then(d => { if (d.region) regionIn.value = d.region; })\r\n    .catch(() => { /* ignore */ });\r\n\r\n  // —— Generate → Call Backend & Show Result ——  \r\n  document.getElementById('generate').addEventListener('click', async () => {\r\n    const region   = regionIn.value.trim();\r\n    const medium   = mediumIn.value.trim();\r\n    const category = categoryIn.value.trim();\r\n\r\n    if (!region || !medium || !category) {\r\n      return alert('Please fill out all fields.');\r\n    }\r\n\r\n    // swap screens\r\n    formScreen.classList.remove('active');\r\n    resultScreen.classList.add('active');\r\n    captionEl.textContent = 'Generating…';\r\n\r\n    try {\r\n      const res  = await fetch('/generate_landing', {\r\n        method:  'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body:    JSON.stringify({ region, medium, category })\r\n      });\r\n      const json = await res.json();\r\n      if (!res.ok) throw new Error(json.error || 'API error');\r\n\r\n      // populate\r\n      heroImg.src           = `/images/${json.modules.hero}`;\r\n      captionEl.textContent = json.caption || 'Welcome!';\r\n      shopBtn.onclick       = () => {\r\n        // map `promo.jpg` → `promo.html`\r\n        const page = json.modules.hero.replace('.jpg','') + '.html';\r\n        window.location.href = page;\r\n      };\r\n    } catch (err) {\r\n      console.error(err);\r\n      captionEl.textContent = 'Oops—something went wrong.';\r\n    }\r\n  });\r\n});\r\n"]}